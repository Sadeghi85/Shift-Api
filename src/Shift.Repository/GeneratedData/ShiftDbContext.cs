// <auto-generated>
// ReSharper disable All

using Microsoft.Data.SqlClient;
using Microsoft.EntityFrameworkCore;
using Microsoft.EntityFrameworkCore.ChangeTracking;
using Microsoft.Extensions.Configuration;
using System;
using System.Collections.Generic;
using System.Data;
using System.Data.SqlTypes;
using System.Linq;
using System.Threading;
using System.Threading.Tasks;

namespace Shift.Repository
{
    public partial class ShiftDbContext : DbContext, IShiftDbContext
    {
        private readonly IConfiguration _configuration;

        public ShiftDbContext()
        {
            InitializePartial();
        }

        public ShiftDbContext(DbContextOptions<ShiftDbContext> options)
            : base(options)
        {
            InitializePartial();
        }

        public ShiftDbContext(IConfiguration configuration)
        {
            _configuration = configuration;
            InitializePartial();
        }

        public DbSet<Portal> Portals { get; set; } // Portals
        public DbSet<SamtAgent> SamtAgents { get; set; } // SAMT_Agents
        public DbSet<SamtHrCooperationType> SamtHrCooperationTypes { get; set; } // SAMT_HRCooperationType
        public DbSet<SamtHrJob> SamtHrJobs { get; set; } // SAMT_HRJob
        public DbSet<SamtResourceType> SamtResourceTypes { get; set; } // SAMT_ResourceTypes
        public DbSet<ShiftAgentReport> ShiftAgentReports { get; set; } // Shift_AgentReport
        public DbSet<ShiftCalculation> ShiftCalculations { get; set; } // Shift_Calculations
        public DbSet<ShiftCrewRewardFine> ShiftCrewRewardFines { get; set; } // Shift_CrewRewardFine
        public DbSet<ShiftCrewRewardFineReason> ShiftCrewRewardFineReasons { get; set; } // Shift_CrewRewardFineReason
        public DbSet<ShiftEmploymentDetail> ShiftEmploymentDetails { get; set; } // Shift_EmploymentDetail
        public DbSet<ShiftJob> ShiftJobs { get; set; } // Shift_Job
        public DbSet<ShiftLocation> ShiftLocations { get; set; } // Shift_Locations
        public DbSet<ShiftLog> ShiftLogs { get; set; } // Shift_Log
        public DbSet<ShiftPortalLocation> ShiftPortalLocations { get; set; } // Shift_PortalLocations
        public DbSet<ShiftRevisionProblem> ShiftRevisionProblems { get; set; } // Shift_RevisionProblem
        public DbSet<ShiftShift> ShiftShifts { get; set; } // Shift_Shift
        public DbSet<ShiftShiftTablet> ShiftShiftTablets { get; set; } // Shift_ShiftTablet
        public DbSet<ShiftShiftTabletConductor> ShiftShiftTabletConductors { get; set; } // Shift_ShiftTabletConductor
        public DbSet<ShiftShiftTabletCrew> ShiftShiftTabletCrews { get; set; } // Shift_ShiftTabletCrew
        public DbSet<ShiftShiftTabletCrewReplacement> ShiftShiftTabletCrewReplacements { get; set; } // Shift_ShiftTabletCrewReplacement
        public DbSet<ShiftShiftTemplate> ShiftShiftTemplates { get; set; } // Shift_ShiftTemplate
        public DbSet<ShiftTabletConductorChanx> ShiftTabletConductorChanges { get; set; } // Shift_TabletConductorChanges
        public DbSet<ShiftTabletScriptSupervisorDescription> ShiftTabletScriptSupervisorDescriptions { get; set; } // Shift_TabletScriptSupervisorDescription
        public DbSet<TelavatAgentResourceType> TelavatAgentResourceTypes { get; set; } // TelavatAgentResourceTypes
        public DbSet<UsersPortal> UsersPortals { get; set; } // UsersPortals

        protected override void OnConfiguring(DbContextOptionsBuilder optionsBuilder)
        {
            if (!optionsBuilder.IsConfigured && _configuration != null)
            {
                optionsBuilder.UseSqlServer(_configuration.GetConnectionString(@"DefaultConnection"));
            }
        }

        public bool IsSqlParameterNull(SqlParameter param)
        {
            var sqlValue = param.SqlValue;
            var nullableValue = sqlValue as INullable;
            if (nullableValue != null)
                return nullableValue.IsNull;
            return (sqlValue == null || sqlValue == DBNull.Value);
        }

        protected override void OnModelCreating(ModelBuilder modelBuilder)
        {
            base.OnModelCreating(modelBuilder);

            modelBuilder.ApplyConfiguration(new PortalConfiguration());
            modelBuilder.ApplyConfiguration(new SamtAgentConfiguration());
            modelBuilder.ApplyConfiguration(new SamtHrCooperationTypeConfiguration());
            modelBuilder.ApplyConfiguration(new SamtHrJobConfiguration());
            modelBuilder.ApplyConfiguration(new SamtResourceTypeConfiguration());
            modelBuilder.ApplyConfiguration(new ShiftAgentReportConfiguration());
            modelBuilder.ApplyConfiguration(new ShiftCalculationConfiguration());
            modelBuilder.ApplyConfiguration(new ShiftCrewRewardFineConfiguration());
            modelBuilder.ApplyConfiguration(new ShiftCrewRewardFineReasonConfiguration());
            modelBuilder.ApplyConfiguration(new ShiftEmploymentDetailConfiguration());
            modelBuilder.ApplyConfiguration(new ShiftJobConfiguration());
            modelBuilder.ApplyConfiguration(new ShiftLocationConfiguration());
            modelBuilder.ApplyConfiguration(new ShiftLogConfiguration());
            modelBuilder.ApplyConfiguration(new ShiftPortalLocationConfiguration());
            modelBuilder.ApplyConfiguration(new ShiftRevisionProblemConfiguration());
            modelBuilder.ApplyConfiguration(new ShiftShiftConfiguration());
            modelBuilder.ApplyConfiguration(new ShiftShiftTabletConfiguration());
            modelBuilder.ApplyConfiguration(new ShiftShiftTabletConductorConfiguration());
            modelBuilder.ApplyConfiguration(new ShiftShiftTabletCrewConfiguration());
            modelBuilder.ApplyConfiguration(new ShiftShiftTabletCrewReplacementConfiguration());
            modelBuilder.ApplyConfiguration(new ShiftShiftTemplateConfiguration());
            modelBuilder.ApplyConfiguration(new ShiftTabletConductorChanxConfiguration());
            modelBuilder.ApplyConfiguration(new ShiftTabletScriptSupervisorDescriptionConfiguration());
            modelBuilder.ApplyConfiguration(new TelavatAgentResourceTypeConfiguration());
            modelBuilder.ApplyConfiguration(new UsersPortalConfiguration());

            modelBuilder.Entity<SpShiftCheckShiftTimeOverlapReturnModel>().HasNoKey();

            OnModelCreatingPartial(modelBuilder);
        }


        partial void InitializePartial();
        partial void DisposePartial(bool disposing);
        partial void OnModelCreatingPartial(ModelBuilder modelBuilder);
        static partial void OnCreateModelPartial(ModelBuilder modelBuilder, string schema);

        // Stored Procedures
        public List<SpShiftCheckShiftTimeOverlapReturnModel> SpShiftCheckShiftTimeOverlap(int? id, int? portalId, int? shiftTypeId, TimeSpan? startTime, TimeSpan? endTime)
        {
            int procResult;
            return SpShiftCheckShiftTimeOverlap(id, portalId, shiftTypeId, startTime, endTime, out procResult);
        }

        public List<SpShiftCheckShiftTimeOverlapReturnModel> SpShiftCheckShiftTimeOverlap(int? id, int? portalId, int? shiftTypeId, TimeSpan? startTime, TimeSpan? endTime, out int procResult)
        {
            var idParam = new SqlParameter { ParameterName = "@_id", SqlDbType = SqlDbType.Int, Direction = ParameterDirection.Input, Value = id.GetValueOrDefault(), Precision = 10, Scale = 0 };
            if (!id.HasValue)
                idParam.Value = DBNull.Value;

            var portalIdParam = new SqlParameter { ParameterName = "@_portalId", SqlDbType = SqlDbType.Int, Direction = ParameterDirection.Input, Value = portalId.GetValueOrDefault(), Precision = 10, Scale = 0 };
            if (!portalId.HasValue)
                portalIdParam.Value = DBNull.Value;

            var shiftTypeIdParam = new SqlParameter { ParameterName = "@_shiftTypeId", SqlDbType = SqlDbType.Int, Direction = ParameterDirection.Input, Value = shiftTypeId.GetValueOrDefault(), Precision = 10, Scale = 0 };
            if (!shiftTypeId.HasValue)
                shiftTypeIdParam.Value = DBNull.Value;

            var startTimeParam = new SqlParameter { ParameterName = "@_startTime", SqlDbType = SqlDbType.Time, Direction = ParameterDirection.Input, Value = startTime.GetValueOrDefault() };
            if (!startTime.HasValue)
                startTimeParam.Value = DBNull.Value;

            var endTimeParam = new SqlParameter { ParameterName = "@_endTime", SqlDbType = SqlDbType.Time, Direction = ParameterDirection.Input, Value = endTime.GetValueOrDefault() };
            if (!endTime.HasValue)
                endTimeParam.Value = DBNull.Value;

            var procResultParam = new SqlParameter { ParameterName = "@procResult", SqlDbType = SqlDbType.Int, Direction = ParameterDirection.Output };
            const string sqlCommand = "EXEC @procResult = [dbo].[SP_Shift_CheckShiftTimeOverlap] @_id, @_portalId, @_shiftTypeId, @_startTime, @_endTime";
            var procResultData = Set<SpShiftCheckShiftTimeOverlapReturnModel>()
                .FromSqlRaw(sqlCommand, idParam, portalIdParam, shiftTypeIdParam, startTimeParam, endTimeParam, procResultParam)
                .ToList();

            procResult = (int) procResultParam.Value;
            return procResultData;
        }

        public async Task<List<SpShiftCheckShiftTimeOverlapReturnModel>> SpShiftCheckShiftTimeOverlapAsync(int? id, int? portalId, int? shiftTypeId, TimeSpan? startTime, TimeSpan? endTime)
        {
            var idParam = new SqlParameter { ParameterName = "@_id", SqlDbType = SqlDbType.Int, Direction = ParameterDirection.Input, Value = id.GetValueOrDefault(), Precision = 10, Scale = 0 };
            if (!id.HasValue)
                idParam.Value = DBNull.Value;

            var portalIdParam = new SqlParameter { ParameterName = "@_portalId", SqlDbType = SqlDbType.Int, Direction = ParameterDirection.Input, Value = portalId.GetValueOrDefault(), Precision = 10, Scale = 0 };
            if (!portalId.HasValue)
                portalIdParam.Value = DBNull.Value;

            var shiftTypeIdParam = new SqlParameter { ParameterName = "@_shiftTypeId", SqlDbType = SqlDbType.Int, Direction = ParameterDirection.Input, Value = shiftTypeId.GetValueOrDefault(), Precision = 10, Scale = 0 };
            if (!shiftTypeId.HasValue)
                shiftTypeIdParam.Value = DBNull.Value;

            var startTimeParam = new SqlParameter { ParameterName = "@_startTime", SqlDbType = SqlDbType.Time, Direction = ParameterDirection.Input, Value = startTime.GetValueOrDefault() };
            if (!startTime.HasValue)
                startTimeParam.Value = DBNull.Value;

            var endTimeParam = new SqlParameter { ParameterName = "@_endTime", SqlDbType = SqlDbType.Time, Direction = ParameterDirection.Input, Value = endTime.GetValueOrDefault() };
            if (!endTime.HasValue)
                endTimeParam.Value = DBNull.Value;

            const string sqlCommand = "EXEC [dbo].[SP_Shift_CheckShiftTimeOverlap] @_id, @_portalId, @_shiftTypeId, @_startTime, @_endTime";
            var procResultData = await Set<SpShiftCheckShiftTimeOverlapReturnModel>()
                .FromSqlRaw(sqlCommand, idParam, portalIdParam, shiftTypeIdParam, startTimeParam, endTimeParam)
                .ToListAsync();

            return procResultData;
        }

    }
}
// </auto-generated>
